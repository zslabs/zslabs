<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Extendable switch statements - Zach Schnackel</title><script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default,fetch,Number.isInteger"></script><link rel=stylesheet href=../../assets/css/site.css?1520743328000><link rel=alternate type=application/rss+xml name="Zach Schnackel" title="ZS Labs" href=../../rss.xml></head><body class=page-extendable-switch-statements><div style="border: 0px; clip: rect(0px 0px 0px 0px); height: 0px; overflow: hidden; padding: 0px; position: absolute; width: 0px"><svg width=1500 height=1000 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><defs><pattern id=pattern x=0 y=0 width=1 height=1><image transform=scale(.25) x=-800 y=-575 width=1500 height=1000 xlink:href=../../assets/media/pattern.png /></pattern></defs><rect width=1500 height=1000 fill=url(#pattern)></rect></svg></div><div class="container u-posRelative" style="overflow: hidden"><header class=header><div><a href=../../ class="button--reset logo-interior"><i data-icon=logo class=icon-logo--small></i></a></div><div><a href=#articles class=articles-interiorTrigger data-offcanvas><i data-icon=list></i></a></div><div><a href=#aboutModal class="button--reset about-trigger" data-modal><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=../../assets/media/me.png alt="Zach Schnackel"></a><div id=aboutModal class="modal aboutModal" tabindex=-1 role=dialog aria-labelledby=aboutModal-title aria-describedby=aboutModal-desc><div class=modal-dialog><div class=modal-body><div class="u-flex u-flexEnd"><button class="button--reset modal-close" type=button data-modal-close><i data-icon=close></i></button></div><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=../../assets/media/me.png class=aboutModal-image alt="Zach Schnackel"><h2 id=aboutModal-title class=u-textCenter>Hi, I'm Zach.</h2><div id=aboutModal-desc><ul class="inline inline--center inline--largeAbout-social"><li><a class=social-codepen href=https://codepen.io/zslabs><i data-icon=codepen></i></a></li><li><a class=social-github href=https://github.com/zslabs><i data-icon=github></i></a></li><li><a class=social-twitter href=https://twitter.com/zslabs><i data-icon=twitter></i></a></li></ul><p class=u-mv--large>I create buttons, borders, and other groovy things at <a href=http://www.rhinogram.com class="u-textUnderline u-textDefault">Rhinogram</a>. My background involves pushing the limits of of what we can build on the backend and how we can experience it on the frontend. My passions are perfecting process and educating those around me.</p><div class="row row--largeGutter"><div class=column-6@medium><h4>Speaking/Consulting</h4><p>Have an event and/or consluting project you'd like me to be apart of? Awesome! <a href=mailto:info@zslabs.com>Let's chat</a>.</p></div><div class=column-6@medium><h4>How'd you build this site?!</h4><p>Because I love open-source&mdash;it's available for anyone to view. Find a bug? Report it! <a href=https://github.com/zslabs/zslabs.github.io>View source</a>.</p></div></div><div class="u-mt--xlarge u-textCenter"><span class=u-textMuted>Copyright &copy; 2018 Zach Schnackel. Penalty is</span> üî•</div></div></div></div></div></div></header><main class="section article-content"><div class="container container--small"><h1 class=article-title>Extendable switch statements</h1><div class="u-textMuted u-mb--large">Feb 9th, 2013</div><p>Throughout my base parent-theme, <a href=http://baseytheme.com>Basey</a>, I was hell-bent on creating a DRY logic that was intuitive enough to handle the most complex setups, while not being too convoluted for the average user to get up and running. Inspired by <a href=http://scribu.net/wordpress/theme-wrappers.html>Scribu&#39;s article on theme wrappers</a>, I found several areas in my theme that <s>should be</s> needed to be pluggable.</p><p>One of my biggest crutches against WordPress&#39; template system is the cluster-fuck of files that it takes to create a view. But it&#39;s the separation of these files that gives WordPress it&#39;s flexibility and awesome-sauce hierarchy system. So - I needed to bridge the gap.</p><p>One such example is <code>single.php</code>. This file is shows up pretty far-down the <a href=http://codex.wordpress.org/Template_Hierarchy#Visual_Overview>template hierarchy</a> list and as expected, can be overridden with a plethora of different combinations/use-cases. One thing we can almost all agree on -- the surrounding containers for single-views rarely change throughout different post types. So, why don&#39;t we combine them into one? Yes, I completely understand a big list of if statements in a single file would be ridiculous; especially with all of the different types of content that can come with a single-view, but that&#39;s not my argument. My argument is about separating logic from function. Take the following example:</p><pre><code class=language-php>while (have_posts()) : the_post();
  switch($post-&gt;post_type) {
    case &#39;post&#39;:
      echo basey_single_post();
    break;

    default:
      echo basey_single_default();
    break;
  }
endwhile;
</code></pre><p>By calling the above inside of <code>single.php</code>, we&#39;re able to create different &quot;cases&quot; for each post type. This cuts down on duplicating wrapper HTML. &quot;Great - less files. But where&#39;s the output stored?&quot; Elsewhere - because what we&#39;re doing here is laying down a foundation for our views, not outputting them. In Basey, there is a separate <code>output.php</code> file that is used for this exact purpose. Let&#39;s take the above example a bit further.</p><p>As mentioned, Basey is a parent-theme, which means it isn&#39;t mean to be modified directly, but built on-top of. So where does that leave us with our <code>single.php</code> switch statements? The above example is pretty static. Although it gives us a bit more flexibility, any new custom post types we create are not included in this logic (and would ultimately fall-into the default case). That&#39;s where an extremely handy function called <a href=http://codex.wordpress.org/Function_Reference/has_action><code>has_action</code></a> comes into play. By combining this check with our original case statement, we are able to create a pluggable switch statement:</p><pre><code class=language-php>while ( have_posts() ) : the_post();
  switch( $post-&gt;post_type ) {
    case has_action( &quot;basey_loop_single_{$post-&gt;post_type}&quot; ) :
      do_action( &quot;basey_loop_single_{$post-&gt;post_type}&quot; );
    break;

    case &#39;post&#39;:
      echo basey_single_post();
    break;

    default:
      echo basey_single_default();
    break;
  }
endwhile;
</code></pre><p>What the above does is check for the existence of an action that follows the format of <code>basey_loop_single_YOUR_POST_TYPE</code> and if it finds it, perform that action.</p><p>Let&#39;s say you had a post type called <code>movies</code>. What you can now do is create a function like the following to handle your single-view for movies:</p><pre><code class=language-php>function basey_loop_single_movies_output() {
  echo &#39;&lt;h1&gt;&#39; . get_the_title() . &#39;&lt;/h1&gt;&#39;;
  the_content();
}
add_action( &#39;basey_loop_single_movies&#39;, &#39;basey_loop_single_movies_output&#39; );
</code></pre><p>The following logic can be (and is in Basey) extended to other places in your template, like <code>archive.php</code>, creating reusable archive pages for different post types. The intricacies of design don&#39;t always allow these to be as clear-cut, but this has come in-handy during quite a few large site builds where reusable code was a must.</p><hr class=u-mv--large><div id=disqus_thread><button type=button class="button button--comments button--fullWidth" data-js=loadComments>View Comments</button></div><script type=text/javascript>var disqus_shortname  = 'zslabs';
        var disqus_title      = 'Extendable switch statements';
        var disqus_identifier = '/articles/extendable-switch-statements';
        var disqus_url        = 'https://zslabs.com/articles/extendable-switch-statements';</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main></div><aside id=articles class=offCanvas tabindex=-1 role=dialog aria-labelledby=articles-title><div class=offCanvas-panel><button class="button--reset offCanvas-close" type=button data-offcanvas-close><i data-icon=close></i></button><h2 class=article-title>Articles</h2><ul class=articles-list><li><a class=u-inlineBlock href=../../articles/i-‚ù§Ô∏è-loaders/ ><div class="u-textLarge articles-title">I ‚ù§Ô∏è loaders</div><span class=u-textMuted>Mar 25th, 2017</span></a></li><li><a class=u-inlineBlock href=../../articles/onward-and-upward/ ><div class="u-textLarge articles-title">Onward and upward</div><span class=u-textMuted>Jan 21st, 2017</span></a></li><li><a class=u-inlineBlock href=../../articles/round-n-round/ ><div class="u-textLarge articles-title">Round &#39;n round</div><span class=u-textMuted>Jan 8th, 2017</span></a></li><li><a class=u-inlineBlock href=../../articles/gsap/ ><div class="u-textLarge articles-title">GSAP&#39;in</div><span class=u-textMuted>Jan 5th, 2017</span></a></li><li><a class=u-inlineBlock href=../../articles/polyno/ ><div class="u-textLarge articles-title">PolyNo?</div><span class=u-textMuted>Nov 15th, 2015</span></a></li><li><a class=u-inlineBlock href=../../articles/boomqueries/ ><div class="u-textLarge articles-title">BoomQueries - Element Queries, today</div><span class=u-textMuted>Apr 24th, 2015</span></a></li><li><a class=u-inlineBlock href=../../articles/svg-cool-kids/ ><div class="u-textLarge articles-title">Reference SVGs like the cool kids</div><span class=u-textMuted>Oct 14th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/svg-background-fill/ ><div class="u-textLarge articles-title">Modifying SVG background fills</div><span class=u-textMuted>Sep 29th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/do-more-with-less/ ><div class="u-textLarge articles-title">Do more with Less</div><span class=u-textMuted>Aug 14th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/sass-smartypants/ ><div class="u-textLarge articles-title">Sass tips for the wise and extremely good-looking</div><span class=u-textMuted>May 20th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/grunt-all-the-things/ ><div class="u-textLarge articles-title">Grunt all the things</div><span class=u-textMuted>Apr 21st, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/basey/ ><div class="u-textLarge articles-title">Basey - WordPress boilerplate theme</div><span class=u-textMuted>Mar 25th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/less-is-more/ ><div class="u-textLarge articles-title">Less is more</div><span class=u-textMuted>Mar 9th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/support-the-unsupported/ ><div class="u-textLarge articles-title">Support the unsupported</div><span class=u-textMuted>Feb 24th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/furry-sassy/ ><div class="u-textLarge articles-title">Fury &amp; Sassy</div><span class=u-textMuted>Jan 29th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/new-guts/ ><div class="u-textLarge articles-title">New guts</div><span class=u-textMuted>Jan 20th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/pluggable-selectors/ ><div class="u-textLarge articles-title">Pluggable selectors - Sass vs Less</div><span class=u-textMuted>Sep 1st, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/accessing-external-wordpress-data/ ><div class="u-textLarge articles-title">Accessing external WordPress data</div><span class=u-textMuted>Jun 30th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/bust-that-cache/ ><div class="u-textLarge articles-title">Bust that cache</div><span class=u-textMuted>Jun 8th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/upgraded-yeti/ ><div class="u-textLarge articles-title">Upgraded Yeti</div><span class=u-textMuted>Apr 21st, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/versioned-dependencies-with-compass/ ><div class="u-textLarge articles-title">Versioned dependencies with Compass</div><span class=u-textMuted>Mar 31st, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/rethinking-the-wordpress-admin/ ><div class="u-textLarge articles-title">Rethinking the WordPress admin</div><span class=u-textMuted>Mar 16th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/default-views-for-plugins/ ><div class="u-textLarge articles-title">Default views for plugins</div><span class=u-textMuted>Mar 9th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/separating-form-and-function/ ><div class="u-textLarge articles-title">Separating form and function</div><span class=u-textMuted>Feb 20th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/extendable-switch-statements/ ><div class="u-textLarge articles-title">Extendable switch statements</div><span class=u-textMuted>Feb 9th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/journey-to-sublime/ ><div class="u-textLarge articles-title">Journey to Sublime</div><span class=u-textMuted>Feb 2nd, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/hello-kirby/ ><div class="u-textLarge articles-title">Hello Kirby</div><span class=u-textMuted>Jan 28th, 2013</span></a></li></ul></div></aside><script src=../../assets/js/site.js?1520743326000></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-17637644-1', 'auto');
      ga('send', 'pageview');</script></body></html>