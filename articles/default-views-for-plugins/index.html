<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Default views for plugins - Zach Schnackel</title><script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default,fetch,Number.isInteger"></script><link rel=stylesheet href=../../assets/css/site.css?1514729667000><link rel=alternate type=application/rss+xml name="Zach Schnackel" title="ZS Labs" href=../../rss.xml></head><body class=page-default-views-for-plugins><div style="border: 0px; clip: rect(0px 0px 0px 0px); height: 0px; overflow: hidden; padding: 0px; position: absolute; width: 0px"><svg width=1500 height=1000 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><defs><pattern id=pattern x=0 y=0 width=1 height=1><image transform=scale(.25) x=-800 y=-575 width=1500 height=1000 xlink:href=../../assets/media/pattern.png /></pattern></defs><rect width=1500 height=1000 fill=url(#pattern)></rect></svg></div><div class="container u-posRelative" style="overflow: hidden"><header class=header><div><a href=../../ class="button--reset logo-interior"><i data-icon=logo class=icon-logo--small></i></a></div><div><a href=#articles class=articles-interiorTrigger data-offcanvas><i data-icon=list></i></a></div><div><a href=#aboutModal class="button--reset about-trigger" data-modal><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=../../assets/media/me.png alt="Zach Schnackel"></a><div id=aboutModal class="modal aboutModal" tabindex=-1 role=dialog aria-labelledby=aboutModal-title aria-describedby=aboutModal-desc><div class=modal-dialog><div class=modal-body><div class="u-flex u-flexEnd"><button class="button--reset modal-close" type=button data-modal-close><i data-icon=close></i></button></div><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=../../assets/media/me.png class=aboutModal-image alt="Zach Schnackel"><h2 id=aboutModal-title class=u-textCenter>Hi, I'm Zach.</h2><div id=aboutModal-desc><ul class="inline inline--center inline--largeAbout-social"><li><a class=social-codepen href=https://codepen.io/zslabs><i data-icon=codepen></i></a></li><li><a class=social-github href=https://github.com/zslabs><i data-icon=github></i></a></li><li><a class=social-twitter href=https://twitter.com/zslabs><i data-icon=twitter></i></a></li></ul><p class=u-mv--large>I create buttons, borders, and other groovy things at <a href=http://www.rhinogram.com class="u-textUnderline u-textDefault">Rhinogram</a>. My background involves pushing the limits of of what we can build on the backend and how we can experience it on the frontend. My passions are perfecting process and educating those around me.</p><div class="row row--largeGutter"><div class=column-6@medium><h4>Speaking/Consulting</h4><p>Have an event and/or consluting project you'd like me to be apart of? Awesome! <a href=mailto:info@zslabs.com>Let's chat</a>.</p></div><div class=column-6@medium><h4>How'd you build this site?!</h4><p>Because I love open-source&mdash;it's available for anyone to view. Find a bug? Report it! <a href=https://github.com/zslabs/zslabs.github.io>View source</a>.</p></div></div><div class="u-mt--xlarge u-textCenter"><span class=u-textMuted>Copyright &copy; 2017 Zach Schnackel. Penalty is</span> 🔥</div></div></div></div></div></div></header><main class="section article-content"><div class="container container--small"><h1 class=article-title>Default views for plugins</h1><div class="u-textMuted u-mb--large">Mar 9th, 2013</div><p>Today, plugins are not just performing simple manipulations to our beloved CMS - they&#39;re creating new editing experiences, managing SEO, connecting to social networks, etc. And for all the complexities behind these plugins, developers continue to bridge the gap between the awesome-sauce they create and the end-user experience.</p><p>One such example are Custom Post Types. WordPress makes it pretty easy to <a href=http://codex.wordpress.org/Function_Reference/register_post_type>register a custom post type</a>, but aside from the interface built to handle them in the backend, frontend viewing is normally kept pretty minimal (if at all). I felt uneasy about creating my plugin and then asking the end-user to take the reigns and build their own frontend. Sure - it&#39;s not entirely difficult to do, but based on the scope of your plugin, without some sort of starting point, would render it moot.</p><p>Aside from the argument against creating output within plugins; and just leaving that to themes, default layouts can be a helpful starting point to integrating all the baked-in goodness of your plugin into a viewable frontend.</p><p>Let&#39;s take the example of a Directory plugin. Some common views you&#39;ll want to have are:</p><ul><li><strong>A frontpage</strong> - for listing all the top-level categories, featured listings, etc.</li><li><strong>An archive</strong> - further categorization, teaser item listings</li><li><strong>A single-view</strong> - you guessed it Bazooka Joe, a directory item</li></ul><p>The frontpage of the directory plugin can be achieved in a couple ways; a page template, or a shortcode. I prefer the shortcode method. And yes, I completely agree with <a href=http://tommcfarlin.com/wordpress-shortcodes/ >Tom Mcfarlin&#39;s</a> case against shortcodes, but that discussion is for another day.</p><p>So we have our initial listing, but where do we go from here? How do we create custom archive or single-views for our directory plugin? Unfortunately there&#39;s no magical shortcode method here; you&#39;d normally just need to create the <code>taxonomy-{taxonomy}.php</code> or <code>single-{post_type}.php</code> file(s) within your theme and code as needed. Again, not very user-friendly. Wouldn&#39;t it be better if the directory plugin created a default view that we could further customize? Luckily, as with all things WordPress - <em>there&#39;s a hook for that</em>.</p><p>Enter <code>template_include()</code>. This magical function allows us to hook into WordPress&#39; view system before it reaches the end-user, meaning we can inject our own logic in before the template system kicks-in.</p><pre><code class=language-php>function directory_single_template( $template ) {
  // Are we on the single-view of a directory item?
  if ( is_singular( &#39;directory&#39;) ) {
      // Set the loaded template to a file within our plugin
      $template = DIRECTORY_BASE_DIR . &#39;views/directory-templates/single-directory.php&#39;;
    }
  }

  return $template;
}

add_filter( &#39;template_include&#39;, &#39;directory_single_template&#39; );
</code></pre><p>Pretty cool, huh? Within <code>single-directory.php</code> - we can create our own template and load them in for our user. But wait - template is there, but there&#39;s not much control over customizing this view. If we&#39;re trying to make it easier for our end-user, it doesn&#39;t do them much good if we&#39;ve assumed how their layout is constructed (amazingly not everyone uses Twenty Twelve), so let&#39;s make it a bit easier:</p><pre><code class=language-php>function directory_single_template( $template ) {
  // Are we on the single-view of a directory item?
  if ( is_singular( &#39;directory&#39;) ) {
      // Try to find a template file

      // Check the child theme first
      if ( file_exists( trailingslashit( get_stylesheet_directory() ) . &#39;directory-templates/single-directory.php&#39; ) ) {
        $template = trailingslashit( get_stylesheet_directory() ) . &#39;directory-templates/single-directory.php&#39;;
      }

      // Check the parent theme next
      elseif ( file_exists( trailingslashit( get_template_directory() ) . &#39;directory-templates/single-directory.php&#39; ) ) {
        // Set the loaded template to a file within our active theme directory
        $template = trailingslashit( get_template_directory() ) . &#39;directory-templates/single-directory.php&#39;;
      }

      // Fallback to plugin template files
      else {
        // Set the loaded template to a file within our plugin
        $template = DIRECTORY_BASE_DIR . &#39;views/directory-templates/single-directory.php&#39;;
      }
    }
  }

  return $template;
}

add_filter( &#39;template_include&#39;, &#39;directory_single_template&#39; );
</code></pre><p>See what we did there? You can allow your default plugin view to be overridden by conditionally checking for the existence of a specific file in the active theme&#39;s directory. If it doesn&#39;t find it, load the default view as normal. We&#39;ve also organized any customized views for our plugin into a separate directory for easier organization.</p><p>For completeness, you could do the same for taxonomies:</p><pre><code class=language-php>function directory_taxonomy_template( $template ){
  // Are we on the tax-view of the directory?
  if ( is_tax( &#39;directory_cat&#39;) ) {
      // Try to find a template file

      // Check the child theme first
      if ( file_exists( trailingslashit( get_stylesheet_directory() ) . &#39;directory-templates/taxonomy-directory_cat.php&#39; ) ) {
        $template = trailingslashit( get_stylesheet_directory() ) . &#39;directory-templates/taxonomy-directory_cat.php&#39;;
      }

      // Check the parent theme next
      elseif ( file_exists( trailingslashit( get_template_directory() ) . &#39;directory-templates/taxonomy-directory_cat.php&#39; ) ) {
        // Set the loaded template to a file within our active theme directory
        $template = trailingslashit( get_template_directory() ) . &#39;directory-templates/taxonomy-directory_cat.php&#39;;
      }

      // Fallback to plugin template files
      else {
        // Set the loaded template to a file within our plugin
        $template = DIRECTORY_BASE_DIR . &#39;views/directory-templates/taxonomy-directory_cat.php&#39;;
      }
    }
  }

  return $template;
}

add_filter( &#39;template_include&#39;, &#39;directory_tax_template&#39; );
</code></pre><p>The single and/or taxonomy views you write are no different than the ones you would normally create in a theme - rejoice. Now if you&#39;d like to get even fancier, start brainstorming about adding in actions to those default views for the HTML wrappers. That way, users can customize the HTML around your default views without needing to copy anything to their directory.</p><p>Injecting default views into your plugin with <code>template_include</code> is a powerful way for your users to get up and running even quicker -- and it makes you look like a rockstar.</p><hr class=u-mv--large><div id=disqus_thread><button type=button class="button button--comments button--fullWidth" data-js=loadComments>View Comments</button></div><script type=text/javascript>var disqus_shortname  = 'zslabs';
        var disqus_title      = 'Default views for plugins';
        var disqus_identifier = '/articles/default-views-for-plugins';
        var disqus_url        = 'https://zslabs.com/articles/default-views-for-plugins';</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main></div><aside id=articles class=offCanvas tabindex=-1 role=dialog aria-labelledby=articles-title><div class=offCanvas-panel><button class="button--reset offCanvas-close" type=button data-offcanvas-close><i data-icon=close></i></button><h2 class=article-title>Articles</h2><ul class=articles-list><li><a class=u-inlineBlock href=../../articles/i-❤️-loaders/ ><div class="u-textLarge articles-title">I ❤️ loaders</div><span class=u-textMuted>Mar 25th, 2017</span></a></li><li><a class=u-inlineBlock href=../../articles/onward-and-upward/ ><div class="u-textLarge articles-title">Onward and upward</div><span class=u-textMuted>Jan 21st, 2017</span></a></li><li><a class=u-inlineBlock href=../../articles/round-n-round/ ><div class="u-textLarge articles-title">Round &#39;n round</div><span class=u-textMuted>Jan 8th, 2017</span></a></li><li><a class=u-inlineBlock href=../../articles/gsap/ ><div class="u-textLarge articles-title">GSAP&#39;in</div><span class=u-textMuted>Jan 5th, 2017</span></a></li><li><a class=u-inlineBlock href=../../articles/polyno/ ><div class="u-textLarge articles-title">PolyNo?</div><span class=u-textMuted>Nov 15th, 2015</span></a></li><li><a class=u-inlineBlock href=../../articles/boomqueries/ ><div class="u-textLarge articles-title">BoomQueries - Element Queries, today</div><span class=u-textMuted>Apr 24th, 2015</span></a></li><li><a class=u-inlineBlock href=../../articles/svg-cool-kids/ ><div class="u-textLarge articles-title">Reference SVGs like the cool kids</div><span class=u-textMuted>Oct 14th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/svg-background-fill/ ><div class="u-textLarge articles-title">Modifying SVG background fills</div><span class=u-textMuted>Sep 29th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/do-more-with-less/ ><div class="u-textLarge articles-title">Do more with Less</div><span class=u-textMuted>Aug 14th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/sass-smartypants/ ><div class="u-textLarge articles-title">Sass tips for the wise and extremely good-looking</div><span class=u-textMuted>May 20th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/grunt-all-the-things/ ><div class="u-textLarge articles-title">Grunt all the things</div><span class=u-textMuted>Apr 21st, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/basey/ ><div class="u-textLarge articles-title">Basey - WordPress boilerplate theme</div><span class=u-textMuted>Mar 25th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/less-is-more/ ><div class="u-textLarge articles-title">Less is more</div><span class=u-textMuted>Mar 9th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/support-the-unsupported/ ><div class="u-textLarge articles-title">Support the unsupported</div><span class=u-textMuted>Feb 24th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/furry-sassy/ ><div class="u-textLarge articles-title">Fury &amp; Sassy</div><span class=u-textMuted>Jan 29th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/new-guts/ ><div class="u-textLarge articles-title">New guts</div><span class=u-textMuted>Jan 20th, 2014</span></a></li><li><a class=u-inlineBlock href=../../articles/pluggable-selectors/ ><div class="u-textLarge articles-title">Pluggable selectors - Sass vs Less</div><span class=u-textMuted>Sep 1st, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/accessing-external-wordpress-data/ ><div class="u-textLarge articles-title">Accessing external WordPress data</div><span class=u-textMuted>Jun 30th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/bust-that-cache/ ><div class="u-textLarge articles-title">Bust that cache</div><span class=u-textMuted>Jun 8th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/upgraded-yeti/ ><div class="u-textLarge articles-title">Upgraded Yeti</div><span class=u-textMuted>Apr 21st, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/versioned-dependencies-with-compass/ ><div class="u-textLarge articles-title">Versioned dependencies with Compass</div><span class=u-textMuted>Mar 31st, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/rethinking-the-wordpress-admin/ ><div class="u-textLarge articles-title">Rethinking the WordPress admin</div><span class=u-textMuted>Mar 16th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/default-views-for-plugins/ ><div class="u-textLarge articles-title">Default views for plugins</div><span class=u-textMuted>Mar 9th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/separating-form-and-function/ ><div class="u-textLarge articles-title">Separating form and function</div><span class=u-textMuted>Feb 20th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/extendable-switch-statements/ ><div class="u-textLarge articles-title">Extendable switch statements</div><span class=u-textMuted>Feb 9th, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/journey-to-sublime/ ><div class="u-textLarge articles-title">Journey to Sublime</div><span class=u-textMuted>Feb 2nd, 2013</span></a></li><li><a class=u-inlineBlock href=../../articles/hello-kirby/ ><div class="u-textLarge articles-title">Hello Kirby</div><span class=u-textMuted>Jan 28th, 2013</span></a></li></ul></div></aside><script src=../../assets/js/site.js?1514729668000></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-17637644-1', 'auto');
      ga('send', 'pageview');</script></body></html>